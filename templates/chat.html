<!DOCTYPE html>
<html>
<head><title>Rathana Chat Room</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
<style>
    body { background: #0e1621; color: white; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
    #chat { flex: 1; overflow-y: auto; padding: 20px; }
    #input-area { background: #17212b; padding: 20px; display: flex; }
    input { flex: 1; padding: 12px; border-radius: 8px; border: none; background: #242f3d; color: white; }
    button { margin-left: 10px; padding: 10px 20px; background: #2ecc71; color: white; border: none; border-radius: 8px; cursor: pointer; }
    .msg { margin-bottom: 10px; padding: 10px; background: #2b5278; border-radius: 10px; width: fit-content; max-width: 80%; }
</style>
</head>
<body>
    <div id="chat"></div>
    <div id="input-area">
        <input type="text" id="msg" placeholder="Write a message..." autocomplete="off">
        <button onclick="send()">SEND</button>
    </div>
    <script>
        var socket = io();
        var user = "{{ username }}";
        function send() {
            var m = document.getElementById('msg');
            if(m.value) {
                socket.emit('message', { user: user, msg: m.value });
                m.value = '';
            }
        }
        socket.on('message', function(data) {
            var c = document.getElementById('chat');
            c.innerHTML += '<div class="msg"><b>' + data.user + ':</b> ' + data.msg + '</div>';
            c.scrollTop = c.scrollHeight;
        });
    </script>
</body>
</html>